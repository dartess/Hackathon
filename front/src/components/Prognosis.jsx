import React, {useState} from 'react';
import Title from './Title';
import cn from 'classnames';
import { LineChart, Line, Label, CartesianGrid, XAxis, YAxis, Tooltip } from 'recharts';
import './Prognosis.scss';

export default function Prognosis({data}) {
  const [year, setYear] = useState(data[1].year);
  const yearInfo = data.find(({year: fYear}) => fYear == year);
  
  return (
    <>
      <div className="prognosis container">
        <Title>Прогноз необходимого количества преподавателей</Title>
        <LineChart 
          width={600}
          height={300}
          data={data}
          margin={{ top: 5, right: 20, bottom: 5, left: 0 }}
          className="chart"
        >
          <CartesianGrid stroke="#ccc" vertical={false} />
          <XAxis
            dataKey="year"
            tick={(p) => {
              return <text 
                {...p}
                onClick={() => p.payload.index && setYear(p.payload.value)}
                fontSize={14}
                fill="#000"
                y={p.y + 10}
                className={cn('y-tick', {clickable: p.payload.index > 0, current: p.payload.value == year})}
              >
                {p.payload.value}
              </text> 
            }}
          />
          <YAxis
            domain={['dataMin - 3', 'dataMax + 3']}
            tick={{fontSize: 14, fill: '#000'}}
          />
          <Line
            type="linear"
            strokeWidth={2}
            dot={{stroke: '#000', strokeWidth: 3, r: 2}}
            activeDot={{stroke: '#000', strokeWidth: 3, r: 2}}
            dataKey="count"
            stroke="#000000"
          />
          <Tooltip cursor={false} />
        </LineChart>
      </div>
      <div className="info">
      <div className="info-wrap">
        <div className="info-title">
          <svg version="1" xmlns="http://www.w3.org/2000/svg" width="1706.667" height="1702.667" viewBox="0 0 1280 1277"><path d="M1001 1.4c-6.7 1.8-11.6 5.1-16 11-2.1 2.8-20.4 21.5-40.7 41.6C882 115.8 721 276 558 438.5 472.5 523.8 337.8 658 258.8 736.8L115.1 880.1l-7.1 24.7c-3.9 13.6-9.8 33.7-13 44.7-3.2 11-11.3 38.9-18 62-6.7 23.1-16.9 58.2-22.7 78-5.8 19.8-14 48.1-18.3 63-7 24-25.3 87.1-33.1 113.9-1.6 5.5-2.7 10.1-2.6 10.3.2.1 12.9-3.3 28.3-7.8 15.3-4.4 51.1-14.7 79.4-22.9 28.3-8.2 75.8-21.9 105.5-30.5 29.7-8.5 83.3-23.9 119-34.2l65-18.6 20.5-20.1c11.3-11 82.2-81.5 157.5-156.6 548.7-546.8 696.8-694.7 698-696.9 8.5-15.4 8.5-28.4 0-53.1-23-66.8-107.6-161.3-186.6-208.5C1051 6.1 1019.3-3.6 1001 1.4z"/></svg>
          Конкурс
        </div>
        <div className="info-title">
        <svg version="1" xmlns="http://www.w3.org/2000/svg" width="1706.667" height="1181.333" viewBox="0 0 1280 886"><path d="M567 38.1c-39.9 20.9-84.4 44.2-99 51.8-14.6 7.6-40.9 21.4-58.5 30.6-17.6 9.2-60.1 31.5-94.5 49.5C50.8 308.1 1 334.3 1 334.9c0 .3 32.3 17.6 71.8 38.4 83 43.7 129.9 68.4 207.2 109.2C532.7 615.9 639.2 672 640 672c.8 0 75-39.1 410-215.9 46.5-24.5 117-61.7 156.7-82.6 39.7-20.9 72.2-38.3 72.3-38.6 0-.6-44.6-24-409.5-214.9-19.2-10.1-43.8-22.9-54.5-28.5-10.7-5.6-54.5-28.5-97.2-50.8C675.1 18.3 640 0 639.8 0c-.2.1-32.9 17.2-72.8 38.1zM91.1 557.2v158.3l13.8-27.5 13.9-27.5 13.8 27.5 13.9 27.5.3-143c.2-113.5-.1-143.2-1-144.1-.7-.7-8.3-5-16.8-9.4-8.5-4.5-20.6-10.9-26.7-14.2L91 398.9l.1 158.3z"/><path d="M267.5 622.8c0 146.5-.6 134.3 7.4 150.7 22.5 46 94.8 81.1 205.6 99.9 95.9 16.3 218.5 16.5 312.3.5 78.7-13.4 136.8-33.4 175.5-60.6 17.7-12.4 33.2-30.4 39.3-45.4 5.3-13 5.2-10 4.6-147.9-.3-70.4-.6-128-.8-128-.1 0-83.8 44.1-185.8 97.9l-185.6 98-185.6-98c-102-53.8-185.8-97.9-186.2-97.9-.4 0-.7 58.8-.7 130.8z"/></svg>
          Университет
        </div>
        <div className="info-title">
          <svg version="1" xmlns="http://www.w3.org/2000/svg" width="1706.667" height="1364" viewBox="0 0 1280 1023"><path d="M579 .6c-67.8 2.1-142.5 6.8-196.5 12.5-16.2 1.7-19.9 2.4-25 4.8-8.4 3.9-12.9 8.2-16.6 15.7-2.9 5.9-3.1 6.9-2.7 14.6.6 10.1 3.3 16.4 9.8 22.8l4.6 4.5-2.7 16.5c-1.4 9.1-2.9 18.6-3.3 21.2-.7 4.5-.9 4.8-6.1 7.2-13.7 6.2-21.5 20-21.5 37.7v5.9H-.2l.6 4.7c6.2 49 16.7 203.9 29.2 430.8 1.6 29.3 1.7 30.1 4.4 35.5 6.9 13.6 17 23.6 30.5 30.1 15.2 7.4-3.7 6.9 254.7 6.9H552l.2-53.8c.2-29.5.6-53.6 1.1-53.5.4.2 41.7.3 91.7.3h91v107h234.3c231.3 0 234.5 0 242.3-2 15.5-3.9 27.7-12 37.1-24.5 10.1-13.4 10-12.8 11.7-64.1.9-24.7 2.3-68.3 3.1-96.9 5.1-176.1 8.6-252.6 14-305.4.8-7.9 1.5-14.5 1.5-14.7 0-.2-75.4-.4-167.5-.4H945v-6.8c-.1-17.4-7.2-30-21-36.8-3-1.5-5.6-2.7-5.6-2.8-.1-.1-1.6-9.4-3.4-20.8L911.7 76l5.2-5.5c9.1-9.6 12.1-21.1 8.6-33-2.3-7.9-11.3-17.2-19.8-20.3-11.4-4.3-82-10.8-160.7-14.8C716.8 1 605.6-.2 579 .6zM381.7 30.8c1.2.7 3.4 2.8 5 4.8 3.4 4.6 4.4 13.4 1.9 18.2-2.5 4.8-3.3 4.5-2.9-1.1 1.1-14.9-16.3-21.3-26.1-9.7-1.4 1.8-2.6 4.2-2.6 5.6 0 1.3-.4 2.4-1 2.4-1.8 0-1.1-8.2 1.1-12.7 1.1-2.3 3.3-5.2 4.9-6.3 5.2-3.7 14-4.2 19.7-1.2zm518.4.8c6.2 3.1 10.8 12.3 9.3 18.7l-.7 3.2-1.7-5.2c-.9-2.9-2.3-5.9-3-6.8-2.4-2.8-6.8-4.5-11.9-4.5-3.9 0-5.6.6-8.1 2.6-4.8 4.1-6.3 7.9-5.7 14.3.5 5.1.4 5.4-.9 3.6-.8-1.1-1.9-3.7-2.5-5.9-3.9-14.4 11.7-26.8 25.2-20zM713.5 66c60.4 2.1 165.6 9.8 168 12.2.4.3 2.2 10.3 4.1 22.3l3.5 21.6-4.5 4c-2.8 2.5-5.8 6.6-7.8 10.7-3 6-3.3 7.7-3.6 16.9l-.4 10.3H391.2l-.4-10.3c-.4-12.6-3.1-19.2-10.8-26.6l-5-4.8 3.5-21.9c2-12 3.7-21.9 3.8-22.1 1.5-1.4 82.5-7.8 131.7-10.3 55.9-2.9 146.8-3.8 199.5-2zm213.1 79.7c.8 1.8 1.4 6.5 1.4 10.8v7.5l-19.2-.2-19.3-.3.1-8c0-4.9.5-9 1.4-10.5 1.4-2.5 1.4-2.5 2.1 2.1 1.5 9.8 6.6 14.9 15 14.9 5.6 0 10.6-3 13.2-8 1.4-2.7 1.7-4.8 1.2-9.5-.5-5.6-.4-5.9 1.1-4 .9 1.1 2.2 3.4 3 5.2zm-584.9.7c-.2 5.1.2 7 1.9 9.2 3.7 5 7 6.8 12.4 6.8 7.9 0 13.8-5.5 14.7-13.8.3-2.5.9-4.6 1.4-4.6 1.4 0 2.9 7.2 2.9 13.7v6.3h-39v-7c0-4.1.6-8.6 1.5-10.7 1.4-3.3 3.3-6.3 4-6.3.2 0 .2 2.9.2 6.4z"/><path d="M636.9 601c-6.2 3.3-10.9 10.6-10.9 17 0 3.4 2.2 9.1 4.7 12l2.6 3.1-2.1 18.2c-1.1 10-1.8 18.5-1.5 18.9.2.5 7.3.8 15.8.8s15.6-.3 15.8-.8c.2-.4-.5-8.9-1.5-18.9l-2-18.2 2.5-3.1c2.5-2.9 4.7-8.6 4.7-12 0-3.4-2.2-9.1-4.7-12.1-5.5-6.5-16.2-8.7-23.4-4.9zM31 697.7c0 1.5-2.9 63.5-6.5 137.8-8.5 178-8.9 186.4-8.3 187 .2.3 6.7-.1 14.4-.9 15.5-1.7 48.3-4.1 76.4-5.7 10.2-.6 50.4-1.3 89.5-1.6 69.7-.5 110 .1 212 3.2 111.2 3.4 134.9 3.9 205.5 3.8 68.4 0 104.4-.5 207.5-3.3 96.9-2.6 119-3.1 188.5-3.7 76.7-.6 131.9.3 188 3.2 28.9 1.5 65.2 4 74.7 5.1l5.1.6-.4-5.8c-.3-3.3-1.8-31.1-3.5-61.9-1.6-30.8-4.1-76.4-5.4-101.3-1.4-24.8-3.6-65.8-5-91-3.6-65.4-3.7-68.2-4.2-68.2-.3 0-1.7.9-3.2 1.9-4 2.9-20 10.6-25.6 12.4-16.8 5.5 1.6 5.1-256.7 5.4L736 715v115H552V715l-236.7-.3c-216.7-.3-237.4-.4-243.4-2-13.6-3.4-28-9.4-37.6-15.8l-3.3-2.1v2.9z"/><path d="M594 752.5V799h102l-.2-46.3-.3-46.2-50.7-.3-50.8-.2v46.5z"/></svg>
          Работа
        </div>
      </div>
      <hr className="info-line"/> 
      <div className="info-wrap">
        <div className="info-values-group">
          {yearInfo.additional.shool.map(([title, value]) => (
            <div className="info-item" key={title}>
              <span className="info-item-title">{title}</span>
              <span className="info-item-value">{value}</span>
            </div>
          ))}
        </div>
        <div className="info-values-group">
          {yearInfo.additional.university.map(([title, value]) => (
            <div className="info-item" key={title}>
              <span className="info-item-title">{title}</span>
              <span className="info-item-value">{value}</span>
            </div>
          ))}
        </div>
        <div className="info-values-group">
          {yearInfo.additional.work.map(([title, value]) => (
            <div className="info-item" key={title}>
              <span className="info-item-title">{title}</span>
              <span className="info-item-value">{value}</span>
            </div>
          ))}
        </div>
      </div>
      </div>
    </>
  );
}
